# EU4 GUI Province Editor
Created by [Jakub21](https://github.com/Jakub21)  
Editor [GitHub Repository](https://github.com/Jakub21/EU4-GUI-Province-Editor)  
Program is licensed under MIT License  
Development started February 2018



# Setup

### Python
Program was developed for [Python 3.6](https://www.python.org/). As of May 2018 program was not tested with other versions of Python.

### Packages
The following Python packages (and their dependencies) are required to run the program
- [Pandas](https://pandas.pydata.org/)
- [wxPython](https://www.wxpython.org/)
- [PyYAML](https://pyyaml.org/)

### Executable
To run program execute `Editor.pyw` with Python 3. To open real-time logging console in background execute `Debug.py` instead. No arguments are taken.

### First use
When program is launched for the first time, a Configurator will start. Selecting assignment and localisation files is mandatory. Check [Configurator Section](#configurator) for detailed description.



# General usage

### Top bar
Top bar consists of 5 menus.
- `Main` menu's options:
    - `Run Configurator`: open [Confugurator](#configurator)
    - `Load Commands`: load [Commands File](#commands-file)
    - `Quit`: Leave program, any unsaved changes are lost.
- `File` menu's options:
    - `Load Sheet` load data from CSV spreadsheet
    - `Load Original` load data from directory (original-like files)
    - `Update with Sheet` update current program data with contents of spreadsheet
    - `Update with Original` update current program data with contents of directory
    - `Save to Sheet` save data to CSV spreadsheet
    - `Save to Original` save data to directory (original-like files)
    - `Save to Original / Changed` same as above but only provinces that were modified
- `Selection` menu's options:
    - `New Selection` create new selection
    - `Sub Selection` create new selection only with provinces from the current one
    - `Append` append provinces to current selection
- `Sort` menu's options:
    - `Sort by ID` sort provinces by their IDs
    - `Sort by Location` sort provinces by location (regions and areas)
- `Modify` menu's options:
    - `Modify Column` modify column in whole selection
    - `Modify Province` modify single cell

### Commands bar
Commands bar is where [commands](#commands) are to be entered

### Side bar
Side bar contains various buttons. It is here for future use. The buttons there are just for tests.

### Central frame
Program displays data representation in central frame. Representation is generated by Pandas package.



# Configurator
To open configurator, on top bar, click `Main` menu and choose `Run Configurator` option

### Files
Editor needs 4 files from game directory to work properly. This is list of these files and their paths in game directory. Program does not modify them.
- Area assignment file `game/map/area.txt`
- Region assignment file `game/map/region.txt`
- Super-region assignment file `game/map/superregion.txt`
- Province names localisation file for which user can choose any language version `game/localisation/prov_names_l_LANG.yml`

### Display
Program displays data representation in frame in the center of main window. In configurator there are a few options that affect the way program does it. These are:
- `Font size`: Modifies font size in representation frame.
- `Hide provinces with no super-region`: If checked, provinces that are not assigned to any super-region will not be displayed.
- `Hide provinces with specified super-regions`: If checked, provinces that are assigned to super-region listed in `Hidden super-regions` will not be displayed
- `Hidden columns`: List of super-regions to hide.



# Commands
Program can receive commands from Command Line as well as Command Files. This section explains how to use commands.

##### Symbols used in list of commands
`[]` - Required argument,  
`{}` - Conditional argument,  
`*` - Argument supports multiple values  

### List syntax
Commands parser supports lists. If argument allows multiple values, wrap those values in square brackets `[]`. See examples below:
```
select sub area [champagne ile_de_france]
```
```
in prov [183 4389] fort yes
```

### Comments
To add comment in Commands File use `>#`. Comment ends when next `>` character is found. Example:
```
> command
># This is comment
Comments ignore newlines
> command
```

### Command Files
In command files, each command should start with `>`. First word of every command should be preceded with space. Example:
```
> select new culture westphalian
```

### Filestream Commands
##### Load
`[type]` argument only can have values: `sheet`, `orig`  
`[path]` path of directory/sheet to load data from  
`{date}` argument is only required if `[type]` has value `orig`
```
load [type] [path] {date}
load sheet sample.csv
```

##### Load-Update
`[type]` argument only can have values: `sheet`, `orig`  
`[path]` path of directory/sheet to load data from  
`{date}` argument is only required if `[type]` has value `orig`  
```
loadu [type] [path] {date}
loadu orig samples/provinces 1642.7.3
```

##### Save
`[type]` argument only can have values: `sheet`, `orig`, `diff`  
`[path]` path of directory/sheet to save data to
```
save [type] [path]
save diff samples/result
```

### Data Manipulation Commands
##### Select
`[mode]` Selection mode. Valid values: `new` `sub` `app`.  
`[column]` Name of column to search for values in  
`[value]*` Provinces with this value will be added to selection  
```
select [mode] [column] [value]*
select new area slovakia
```

##### Sort
Sorts provinces. Available sorting modes are `loc` - by location and `id` - by id. Provinces are automatically sorted by location every time data is loaded.
```
sort [mode]
sort id
```

##### Set
In current selection, changes all values in specified column to specified value.  
`[column]` specifies column  
`[value]` specifies value  
```
set [column] [value]
set culture austrian
```

##### In-scope
Finds provinces with "condition value" in "condition column" and changes all entries in "value column" to "value"
```
in [condition column] [condition value]* [value column] [value]
in region iberia religion catholic
```

### General Commands
##### Represent
Update central frame with current data
```
repr
```

##### Exit
Leave program, any unsaved changes are lost.
```
exit
```
